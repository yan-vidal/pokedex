<div class="absolute inset-0 overflow-hidden rounded-r-2xl shadow-xl">
    
    <!-- Background Layer with Clip-Path (Visual only) -->
    <div class="absolute inset-0 bg-red-600 pointer-events-none z-0"
         style="clip-path: path('M 0 0 Q 310 0, 320 85 L 320 520 L 0 520 Z');">
    </div>

    <!-- 3D Border Overlay -->
    <svg class="absolute inset-0 w-full h-full pointer-events-none z-50" viewBox="0 0 320 520" preserveAspectRatio="none">
      <path d="M 0 0 Q 310 0, 320 85 L 320 520 L 0 520 Z" 
            fill="none" 
            stroke="#991b1b" 
            stroke-width="4" />
    </svg>

    <!-- Interactive Content Layer -->
    <div class="relative z-10 flex flex-col p-6 pt-24 h-full">
        <!-- Information Screen -->
        <div class="bg-slate-800 rounded pt-1.5 px-3 pb-3 h-20 border-4 border-slate-900 shadow-[inset_0_0_10px_rgba(0,0,0,1)] overflow-hidden mb-6 relative">
           <div class="absolute inset-0 bg-[linear-gradient(rgba(18,16,16,0)_50%,rgba(0,0,0,0.25)_50%)] z-10 pointer-events-none bg-[length:100%_4px]"></div>
          
          @if (selectedPokemon(); as pk) {
            <div class="text-[12px] text-green-400 font-mono leading-tight">
              <p class="font-bold border-b border-green-900/50 mb-1 pb-1 uppercase">
                {{ pk.name }}: {{ pk.types[0].type.name }} {{ pk.types[1] ? '/ ' + pk.types[1].type.name : '' }}
              </p>
              <p class="mb-2 text-green-300">
                HT: {{ pk.height / 10 }}m | WT: {{ pk.weight / 10 }}kg
              </p>
              <p class="opacity-80">EXP: {{ pk.base_experience }} | ABILITY: {{ pk.abilities[0].ability.name | uppercase }}</p>
            </div>
          } @else {
            <div class="h-full flex items-center justify-center text-green-900/50 text-[12px] font-mono animate-pulse">
                SELECT POKEMON
            </div>
          }
        </div>

        <!-- Grid of Blue Buttons (List) - Fixed height for 3 rows -->
        <div #scrollContainer class="h-[160px] overflow-y-auto mb-6 pr-2 custom-scrollbar scroll-smooth relative z-20">
          
          @if (isLoading()) {
            <div class="absolute inset-0 bg-slate-900/60 backdrop-blur-[1px] z-30 flex flex-col items-center justify-center rounded">
              <div class="w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mb-2"></div>
              <span class="text-[8px] text-blue-400 font-mono animate-pulse uppercase tracking-widest">Updating Database...</span>
            </div>
          }

          <div class="grid grid-cols-5 gap-1 pt-1" [class.pointer-events-none]="isLoading()" [class.opacity-50]="isLoading()">
            @for (pk of pokemons(); track pk.name) {
              <button 
                (click)="onSelect.emit(pk.name)"
                class="aspect-square bg-gradient-to-br from-blue-400 to-blue-600 border border-blue-800 rounded shadow-md active:scale-95 transition-all flex items-center justify-center overflow-hidden hover:brightness-110 relative"
                [class.ring-2]="selectedPokemon()?.name === pk.name"
                [class.ring-yellow-400]="selectedPokemon()?.name === pk.name"
              >
                <img [src]="getPokemonImageUrl(pk.url)" 
                     class="w-full h-full object-contain pointer-events-none">
              </button>
            }
          </div>
        </div>

        <!-- Footer Navigation Buttons -->
        <div class="mt-auto">
           <div class="flex gap-4">
              <button (click)="onPrev.emit()"
                [disabled]="isLoading()"
                class="flex-1 h-12 bg-slate-800 rounded border-b-4 border-black active:border-b-0 active:translate-y-1 disabled:opacity-50 disabled:translate-y-0 disabled:border-b-4 transition-all flex flex-col items-center justify-center leading-none text-[10px] text-slate-300 font-bold tracking-tighter uppercase"
              >
                 <span>LOAD</span>
                 <span>MORE</span>
              </button>
              <button (click)="onNext.emit()"
                class="flex-1 h-12 bg-slate-800 rounded border-b-4 border-black active:border-b-0 active:translate-y-1 transition-all flex flex-col items-center justify-center leading-none text-[10px] text-slate-300 font-bold tracking-tighter uppercase"
              >
                 <span>TOGGLE</span>
                 <span>VIEW</span>
              </button>
           </div>
        </div>
    </div>
</div>
